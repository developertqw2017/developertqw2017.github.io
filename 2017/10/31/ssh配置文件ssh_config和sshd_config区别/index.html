<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="#ssh配置文件ssh_config和sshd_config区别 问题描述：在一次配置ssh端口和秘钥登录过程中，修改几次都没有成功。最后发现修改的是ssh.config,原因是习惯tab一下，实在是眼拙！ ssh_config和sshd_config配置文件区别​     远程管理linux系统基本上都要使用到ssh，原因很简单：telnet、FTP等传输方式是?以明文传送用户认证信息，本质上是">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/2017/10/31/ssh配置文件ssh_config和sshd_config区别/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="#ssh配置文件ssh_config和sshd_config区别 问题描述：在一次配置ssh端口和秘钥登录过程中，修改几次都没有成功。最后发现修改的是ssh.config,原因是习惯tab一下，实在是眼拙！ ssh_config和sshd_config配置文件区别​     远程管理linux系统基本上都要使用到ssh，原因很简单：telnet、FTP等传输方式是?以明文传送用户认证信息，本质上是">
<meta property="og:updated_time" content="2017-10-30T18:56:43.874Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
<meta name="twitter:description" content="#ssh配置文件ssh_config和sshd_config区别 问题描述：在一次配置ssh端口和秘钥登录过程中，修改几次都没有成功。最后发现修改的是ssh.config,原因是习惯tab一下，实在是眼拙！ ssh_config和sshd_config配置文件区别​     远程管理linux系统基本上都要使用到ssh，原因很简单：telnet、FTP等传输方式是?以明文传送用户认证信息，本质上是">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-ssh配置文件ssh_config和sshd_config区别" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/10/31/ssh配置文件ssh_config和sshd_config区别/" class="article-date">
  <time datetime="2017-10-30T18:56:43.629Z" itemprop="datePublished">2017-10-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#ssh配置文件ssh_config和sshd_config区别</p>
<p>问题描述：在一次配置ssh端口和秘钥登录过程中，修改几次都没有成功。最后发现修改的是ssh.config,原因是习惯tab一下，实在是眼拙！</p>
<h2 id="ssh-config和sshd-config配置文件区别"><a href="#ssh-config和sshd-config配置文件区别" class="headerlink" title="ssh_config和sshd_config配置文件区别"></a>ssh_config和sshd_config配置文件区别</h2><p>​     远程管理linux系统基本上都要使用到ssh，原因很简单：telnet、FTP等传输方式是?以<strong>明文传送用户认证信息</strong>，本质上是不安全的，存在被网络窃听的危险。SSH（Secure Shell）目前较可靠，是专为远程登录会话和其他网络服务提供安全性的协议。利用SSH协议可以有效防止远程管理过程中的信息泄露问题，透过SSH可以对所有<strong>传输的数据进行加密，</strong>也能够防止DNS欺骗和IP欺骗。<br>​    ssh_config和sshd_config都是ssh服务器的配置文件，二者区别在于，前者是针对<strong>客户端的配置文件</strong>，后者则是针对<strong>服务端的配置文件</strong>。两个配置文件都允许你通过设置不同的选项来改变客户端程序的运行方式。下面列出来的是两个配置文件中最重要的一些关键词，每一行为“关键词&amp;值”的形式，其中“关键词”是忽略大小写的。</p>
<h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><p>1、编辑 /etc/ssh/ssh_config 文件</p>
<p># Site-wide defaults for various options<br>   Host *<br>​        ForwardAgent no<br>​        ForwardX11 no<br>​        RhostsAuthentication no<br>​        RhostsRSAAuthentication no<br>​        RSAAuthentication yes<br>​        PasswordAuthentication yes<br>​        FallBackToRsh no<br>​        UseRsh no<br>​        BatchMode no<br>​        CheckHostIP yes<br>​        StrictHostKeyChecking no<br>​        IdentityFile ~/.ssh/identity<br>​        Port 22<br>​        Cipher blowfish<br>​        EscapeChar</p>
<p>下面对上述选项参数逐进行解释：</p>
<p># Site-wide defaults for various options<br>带“#”表示该句为注释不起作，该句不属于配置文件原文，意在说明下面选项均为系统初始默认的选项。说明一下，实际配置文件中也有很多选项前面加有“#”注释，虽然表示不起作用，其实是说明此为系统默认的初始化设置。</p>
<p>Host <em><br>“Host”只对匹配后面字串的计算机有效，“</em>”表示所有的计算机。从该项格式前置一些可以看出，这是一个<strong>类似于全局的选项</strong>，表示下面缩进的选项都适用于该设置，可以指定某计算机替换*号使下面选项只针对该算机器生效。</p>
<p>ForwardAgent no<br>“ForwardAgent”设置连接是否经过验证代理（如果存在）转发给远程计算机。</p>
<p>ForwardX11 no<br>“ForwardX11”设置X11连接是否被自动重定向到安全的通道和显示集（DISPLAY set）。</p>
<p>RhostsAuthentication no<br>“RhostsAuthentication”设置是否使用基于rhosts的安全验证。</p>
<p>RhostsRSAAuthentication no<br>“RhostsRSAAuthentication”设置是否使用用RSA算法的基于rhosts的安全验证。</p>
<p>RSAAuthentication yes<br>“RSAAuthentication”设置是否使用RSA算法进行安全验证。</p>
<p>PasswordAuthentication yes<br>“PasswordAuthentication”设置是否使用口令验证。</p>
<p>FallBackToRsh no<br>“FallBackToRsh”设置如果用ssh连接出现错误是否自动使用rsh，由于rsh并不安全，所以此选项应当设置为”no”。</p>
<p>UseRsh no<br>“UseRsh”设置是否在这台计算机上使用”rlogin/rsh”，原因同上，设为”no”。</p>
<p>BatchMode no<br>“BatchMode”：批处理模式，一般设为”no”；如果设为”yes”，交互式输入口令的提示将被禁止，这个选项对脚本文件和批处理任务十分有用。</p>
<p>CheckHostIP yes<br>“CheckHostIP”设置ssh是否查看连接到服务器的主机的IP地址以防止DNS欺骗。建议设置为”yes”。</p>
<p>StrictHostKeyChecking no<br>“StrictHostKeyChecking”如果设为”yes”，ssh将不会自动把计算机的密匙加入”$HOME/.ssh/known_hosts”文件，且一旦计算机的密匙发生了变化，就拒绝连接。</p>
<p><strong>IdentityFile ~/.ssh/identity</strong><br><strong>“IdentityFile”设置读取用户的RSA安全验证标识。</strong></p>
<p>Port 22<br>“Port”设置连接到远程主机的端口，ssh默认端口为22。</p>
<p>Cipher blowfish<br>“Cipher”设置加密用的密钥，blowfish可以自己随意设置。</p>
<p>EscapeChar<br>“EscapeChar”设置escape字符。</p>
<h2 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h2><p>2、编辑 /etc/ssh/sshd_config 文件：</p>
<p># This is ssh server systemwide configuration file.<br>​          Port 22<br>​          ListenAddress 192.168.1.1<br>​          <strong>HostKey /etc/ssh/ssh_host_key</strong><br>​          ServerKeyBits 1024<br>​          LoginGraceTime 600<br>​          KeyRegenerationInterval 3600<br>​          PermitRootLogin no<br>​          IgnoreRhosts yes<br>​          IgnoreUserKnownHosts yes<br>​          StrictModes yes<br>​          X11Forwarding no<br>​          PrintMotd yes<br>​          SyslogFacility AUTH<br>​          LogLevel INFO<br>​          RhostsAuthentication no<br>​          RhostsRSAAuthentication no<br>​          <strong>RSAAuthentication yes</strong><br><strong>          PasswordAuthentication yes</strong><br>​          PermitEmptyPasswords no<br>​          AllowUsers admin</p>
<p>?下面逐行说明上面的选项设置：</p>
<p>Port 22<br>“Port”设置sshd监听的端口号。</p>
<p>ListenAddress 192.168.1.1<br>“ListenAddress”设置sshd服务器绑定的IP地址。</p>
<p>HostKey /etc/ssh/ssh_host_key<br>“HostKey”设置包含计算机私人密匙的文件。</p>
<p>ServerKeyBits 1024<br>“ServerKeyBits”定义服务器密匙的位数。</p>
<p>LoginGraceTime 600<br>“LoginGraceTime”设置如果用户不能成功登录，在切断连接之前服务器需要等待的时间（以秒为单位）。</p>
<p>KeyRegenerationInterval 3600<br>“KeyRegenerationInterval”设置在多少秒之后自动重新生成服务器的密匙（如果使用密匙）。重新生成密匙是为了防止用盗用的密匙解密被截获的信息。</p>
<p><strong>PermitRootLogin no</strong><br><strong>“PermitRootLogin”设置是否允许root通过ssh登录。这个选项从安全角度来讲应设成”no”</strong>。</p>
<p>IgnoreRhosts yes<br>“IgnoreRhosts”设置验证的时候是否使用“rhosts”和“shosts”文件。</p>
<p>IgnoreUserKnownHosts yes<br>“IgnoreUserKnownHosts”设置ssh daemon是否在进行RhostsRSAAuthentication安全验证的时候忽略用户的”$HOME/.ssh/known_hosts”</p>
<p>StrictModes yes<br>“StrictModes”设置ssh在接收登录请求之前是否检查用户家目录和rhosts文件的权限和所有权。这通常是必要的，因为新手经常会把自己的目录和文件设成任何人都有写权限。</p>
<p>X11Forwarding no<br>“X11Forwarding”设置是否允许X11转发。</p>
<p>PrintMotd yes<br>“PrintMotd”设置sshd是否在用户登录的时候显示“/etc/motd”中的信息。</p>
<p>SyslogFacility AUTH<br>“SyslogFacility”设置在记录来自sshd的消息的时候，是否给出“facility code”。</p>
<p>LogLevel INFO<br>“LogLevel”设置记录sshd日志消息的层次。INFO是一个好的选择。查看sshd的man帮助页，已获取更多的信息。</p>
<p>RhostsAuthentication no<br>“RhostsAuthentication”设置只用rhosts或“/etc/hosts.equiv”进行安全验证是否已经足够了。</p>
<p>RhostsRSAAuthentication no<br>“RhostsRSA”设置是否允许用rhosts或“/etc/hosts.equiv”加上RSA进行安全验证。</p>
<p><strong>RSAAuthentication yes</strong><br><strong>“RSAAuthentication”设置是否允许只有RSA安全验证</strong>。</p>
<p><strong>PasswordAuthentication yes</strong><br><strong>“PasswordAuthentication”设置是否允许口令验证。</strong></p>
<p>PermitEmptyPasswords no<br>“PermitEmptyPasswords”设置是否允许用口令为空的帐号登录。</p>
<p>AllowUsers admin   #限定登录的用户名<br>“AllowUsers”的后面可以跟任意的数量的用户名的匹配串，这些字符串用空格隔开。主机名可以是域名或IP地址。</p>
<p>​    通常情况下我们在连接 OpenSSH服务器的时候假如 UseDNS选项是打开的话，服务器会先根据客户端的 IP地址进行 DNS PTR反向查询出客户端的主机名，然后根据查询出的客户端主机名进行DNS正向A记录查询，并验证是否与原始 IP地址一致，通过此种措施来防止客户端欺骗。平时我们都是动态 IP不会有PTR记录，所以打开此选项也没有太多作用。我们可以通过关闭此功能来提高连接 OpenSSH 服务器的速度。</p>
<p>服务端步骤如下：<br>编辑配置文件 /etc/ssh/sshd_config<br>vim /etc/ssh/sshd_config<br>找到 UseDNS选项，如果没有注释，将其注释<br>#UseDNS yes<br>添加<br>UseDNS no</p>
<p>找到 GSSAPIAuthentication选项，如果没有注释，将其注释<br>#GSSAPIAuthentication yes<br>添加<br>GSSAPIAuthentication no</p>
<p>保存配置文件</p>
<p>重启 OpenSSH服务器<br>/etc/init.d/sshd restart</p>
<p>注意：</p>
<p>​     一般远程修改ssh端口，建议22端口留着防止修改未成功，连不上都SB了。如果开启防火墙记得添加端口放行！</p>
<p>port 22</p>
<p>port 2345</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/10/31/ssh配置文件ssh_config和sshd_config区别/" data-id="cj9imgc2v000epwvas9py6sqp" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/10/31/lastb命令/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Nieuwer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/2017/10/30/电路与电子学/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ouder</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/11/02/On first acquaintance she is cool and slightly distant./">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/11/02/vim和linux快捷键/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/10/31/lastb命令/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/10/31/ssh配置文件ssh_config和sshd_config区别/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/10/30/电路与电子学/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>